prefixes:
  rr: http://www.w3.org/ns/r2rml#
  xsd: http://www.w3.org/2001/XMLSchema#
  schema: http://schema.org/
  mde: http://madrid-events.es/def/
  rml: http://semweb.mmlab.be/ns/rml#
  ql: http://semweb.mmlab.be/ns/ql#

mappings:
  # === Mapeo de Eventos (schema:Event) ===
  eventos:
    sources:
      - [eventos-madrid-updatedv2.csv~csv]
    s: http://madrid-events.es/event/$(ID-EVENTO) # URI basada en el ID
    po:
      - [a, schema:Event]
      - [a, if(contains($(TIPO), 'ActividadesCalleArteUrbano'), schema:VisualArtsEvent,
           if(contains($(TIPO), 'ActividadesDeportivas'), schema:SportsEvent,
           if(contains($(TIPO), 'Arte'), schema:VisualArtsEvent,
           if(contains($(TIPO), 'Campamentos'), schema:EducationEvent,
           if(contains($(TIPO), 'CapacitacionDigital'), schema:EducationEvent,
           if(contains($(TIPO), 'CineActividadesAudiovisuales'), schema:ScreeningEvent,
           if(contains($(TIPO), 'CircoMagia'), schema:TheaterEvent,
           if(contains($(TIPO), 'ClubesLectura'), schema:LiteraryEvent,
           if(contains($(TIPO), 'ComemoracionesHomenajes'), schema:SocialEvent,
           if(contains($(TIPO), 'ConcursosCertamenes'), schema:SocialEvent,
           if(contains($(TIPO), 'ConferenciasColoquios'), schema:SocialEvent,
           if(contains($(TIPO), 'CongresosJornadas'), schema:BusinessEvent,
           if(contains($(TIPO), 'CuentacuentosTiteresMarionetas'), schema:TheaterEvent,
           if(contains($(TIPO), 'CursosTalleres'), schema:EducationEvent,
           if(contains($(TIPO), 'DanzaBaile'), schema:DanceEvent,
           if(contains($(TIPO), 'ExcursionesItinerariosVisitas'), schema:TouristTrip,
           if(contains($(TIPO), 'Exposiciones'), schema:ExhibitionEvent,
           if(contains($(TIPO), 'Ferias'), schema:ExhibitionEvent,
           if(contains($(TIPO), 'Fiestas'), schema:Festival,
           if(contains($(TIPO), 'Idiomas'), schema:EducationEvent,
           if(contains($(TIPO), 'ItinerariosOtrasActividadesAmbientales'), schema:TouristTrip,
           if(contains($(TIPO), 'Musica'), schema:MusicEvent,
           if(contains($(TIPO), 'ProgramacionDestacadaAgendaCultura'), schema:Event,
           if(contains($(TIPO), 'RecitalesPresentacionesActosLiterarios'), schema:LiteraryEvent,
           if(contains($(TIPO), 'TeatroPerformance'), schema:TheaterEvent,
           schema:Event))))))))))))))))))))))))))]
      - [mde:eventType, $(TIPO)]
      - [schema:name, $(TITULO)]
      - [schema:description, $(DESCRIPCION)]
      - [schema:url, $(CONTENT-URL)~iri]
      - [schema:startDate, $(FECHA)~xsd:dateTime]
      - [schema:endDate, $(FECHA-FIN)~xsd:dateTime]
      - [schema:isAccessibleForFree, $(GRATUITO)~xsd:boolean] # 1 o 0
      - [schema:keywords, $(TIPO)]
      - [schema:audience, $(AUDIENCIA)]
      - [schema:eventAttendanceMode, mde:OfflineEventAttendanceMode~iri]
      # Relación con la ubicación
      - p: schema:location
        o:
          mapping: instalaciones

  # === Mapeo de Instalaciones/Lugares (schema:Place) ===
  instalaciones:
    sources:
      - [eventos-madrid-updatedv2.csv~csv]
    s: http://madrid-events.es/place/$(URL-INSTALACION) # URI basada en la URL de la instalación
    po:
      - [a, schema:Place]
      - [schema:name, $(NOMBRE-INSTALACION)]
      - [schema:url, $(URL-INSTALACION)~iri]
      - [mde:accessibility, $(ACCESIBILIDAD-INSTALACION)~xsd:integer]
      # Relación con la dirección
      - p: schema:address
        o:
          mapping: direcciones

  # === Mapeo de Direcciones (schema:PostalAddress) ===
  direcciones:
    sources:
      - [eventos-madrid-updatedv2.csv~csv]
    s: http://madrid-events.es/address/$(CODIGO-POSTAL-INSTALACION)/$(Dirección) # URI compuesta
    po:
      - [a, schema:PostalAddress]
      - [schema:streetAddress, $(Dirección)]
      - [schema:addressLocality, $(BARRIO-INSTALACION)]
      - [schema:addressRegion, "Comunidad de Madrid"]
      - [schema:postalCode, $(CODIGO-POSTAL-INSTALACION)]
      - [mde:district, $(DISTRITO-INSTALACION)] # Propiedad personalizada para el Distrito